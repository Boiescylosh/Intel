<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Pendaftaran Intel</title>
  

</head>
<body>
<!-- partial:index.partial.html -->
<!doctype html>

<html lang="en"> 

 <head> 

  <meta charset="UTF-8"> 

  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Intel Negara</title> 

  <script src="https://cdn.tailwindcss.com"></script> 

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script> 

 </head> 

 <body class="bg-black text-white min-h-screen p-4"> 

  <div class="max-w-3xl mx-auto space-y-4"> 

   <h1 class="text-3xl font-bold text-center">Daftar Intel</h1> <!-- API Key --> 

   <div id="apiKeySection"> 

    <input id="apiKeyInput" type="password" placeholder="Masukan huruf (start with 'p')" class="w-full p-3 rounded text-black mb-2"> <button onclick="checkApiKey()" class="w-full bg-blue-600 hover:bg-blue-700 p-3 rounded font-semibold">Gaskeun</button> 

   </div> <!-- Intel Section --> 

   <div id="intelSection" style="display: none;"> <textarea id="intelInput" rows="3" placeholder="Ketik Nama Anda..." class="w-full p-3 rounded text-black resize-none mb-2"></textarea> 

    <div class="flex flex-col md:flex-row gap-2"> 

     <input id="keteranganInput" placeholder="Keterangan (hasil)" class="w-full p-2 rounded text-black"> <select id="levelInput" class="w-full p-2 rounded text-black"> <option value="">Pilih Level</option> <option value="Sepele">Sepele</option> <option value="Lumayan">Lumayan</option> <option value="Sepuh">Sepuh</option> </select> 

    </div> 

    <div class="flex flex-wrap gap-2 mt-2"> <button onclick="saveIntel()" class="flex-1 bg-green-600 hover:bg-green-700 p-2 rounded font-semibold">Save Intel</button> <button onclick="downloadPDF()" class="flex-1 bg-yellow-600 hover:bg-yellow-700 p-2 rounded font-semibold">Download PDF</button> <button onclick="clearForm()" class="flex-1 bg-gray-700 hover:bg-gray-800 p-2 rounded font-semibold">Hapus</button> 

    </div> 

    <input id="searchInput" oninput="renderIntel()" placeholder="Search Intel..." class="w-full p-2 mt-4 mb-2 rounded text-black"> 

    <h2 class="text-xl font-semibold">Riwayat Intel</h2> 

    <div id="intelDisplay" class="bg-gray-900 p-3 rounded h-80 overflow-y-auto text-sm space-y-3"></div> 

   </div> 

  </div> 

  <script>

    let intelList = [];

    function checkApiKey() {

      const key = document.getElementById("apiKeyInput").value;

      if (key.startsWith("p")) {

        document.getElementById("apiKeySection").style.display = "none";

        document.getElementById("intelSection").style.display = "block";

      } else {

        alert("Invalid API Key");

      }

    }

    function saveIntel() {

      const intel = document.getElementById("intelInput").value.trim();

      const category = document.getElementById("keteranganInput").value.trim();

      const level = document.getElementById("levelInput").value;

      if (!intel) return alert("Masukin nama lu nyet.");

      intelList.push({ intel, category, level, time: new Date().toLocaleString() });

      renderIntel();

      clearForm();

    }

    function clearForm() {

      document.getElementById("intelInput").value = "";

      document.getElementById("keteranganInput").value = "";

      document.getElementById("levelInput").value = "";

    }

    function renderIntel() {

      const search = document.getElementById("searchInput").value.toLowerCase();

      const display = document.getElementById("intelDisplay");

      display.innerHTML = "";

      intelList

        .filter(entry => entry.intel.toLowerCase().includes(search))

        .forEach(entry => {

          const item = document.createElement("div");

          item.className = "bg-gray-800 p-2 rounded";

          item.innerHTML = `

            <p><strong>Intel:</strong> ${entry.intel}</p>

            <p><strong>Keterangan:</strong> ${entry.category}</p>

            <p><strong>Level:</strong> ${entry.level}</p>

            <p><strong>Tersimpan:</strong> ${entry.time}</p>

          `;

          display.appendChild(item);

        });

    }

    async function downloadPDF() {

      const { jsPDF } = window.jspdf;

      const doc = new jsPDF();

      if (intelList.length === 0) {

        alert("No intel to download.");

        return;

      }

      doc.setFontSize(12);

      let y = 10;

      intelList.forEach((entry, index) => {

        const lines = [

          `Agen Anonymous ${index + 1}`,

          `Name: ${entry.intel}`,

          `Keterangan: ${entry.category}`,

          `Level: ${entry.level}`,

          `Tersimpan: ${entry.time}`,

          ""

        ];

        lines.forEach(line => {

          doc.text(line, 10, y);

          y += 7;

          if (y > 280) {

            doc.addPage();

            y = 10;

          }

        });

      });

      doc.save("Intel.pdf");

    }

  </script> 

 </body>

</html>
<!-- partial -->
  
</body>
</html>
